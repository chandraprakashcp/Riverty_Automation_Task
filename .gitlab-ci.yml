stages:
  - test

variables:
  DOTNET_CLI_TELEMETRY_OPTOUT: "1"

before_script:
  - dotnet --version
  - dotnet restore

api-tests:
  stage: test
  script:
    - echo "Running Booking API Tests on Windows Runner..."
    - dotnet build --no-restore
    - dotnet test --logger "console;verbosity=normal" --no-build
    - echo "Tests completed! Check ExtentReports in TestReports folder"
  artifacts:
    when: always
    paths:
      - TestReports/
    expire_in: 1 week
  only:
    - main
    - develop
    - merge_requests
  tags:
    - shell